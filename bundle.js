"use strict";(()=>{var i=window.document;var a=window.navigator;function e(t){let r=i.getElementsByClassName("console-dom").item(0);r.textContent+=`${t}\r
`}var s={REFERENCE_SPACE_TYPE:"unbounded",DEPTH_SENSING:"depth-sensing",HAND_TRACKING:"hand-tracking",BODY_TRACKING:"body-tracking"};async function d(){await a.xr.isSessionSupported("immersive-ar")?e("immersive-ar is supported"):e("immersive-ar is not supported")}function c(t){e(`session.enabledFeatures = ${t.enabledFeatures}`),e(`session.supportedFrameRates = ${t.supportedFrameRates}`),e(`session.frameRate = ${t.frameRate}`),e(`session.inputSources = ${JSON.stringify(t.inputSources)}`),t.inputSources.forEach(n=>{e(`inputSource.gripSpace = ${n.gripSpace}`);let o=n.gripSpace;e(`${o?.toString()}`),e(`inputSource.handedness = ${n.handedness}`),e(`inputSource.profiles = ${n.profiles}`),e(`inputSource.skipRendering = ${n.skipRendering}`),e(`inputSource.targetRayMode = ${n.targetRayMode}`),e(`inputSource.targetRaySpace = ${n.targetRaySpace}`),e(`${n?.targetRaySpace.toString()}`),n.hand?e("hand input module is active"):e("hand input module is not active")}),e(`session.isSystemKeyboardSupported = ${t.isSystemKeyboardSupported}`),e(`session.renderState = ${JSON.stringify(t.renderState)}`),e(`session.visibilityState = ${t.visibilityState}`);let r=t.renderState;e(`renderState.baseLayer = ${r.baseLayer}`),e(`renderState.depthFar = ${r.depthFar}`),e(`renderState.depthNear = ${r.depthNear}`),e(`renderState.inlineVerticalFieldOfView = ${r.inlineVerticalFieldOfView}`),e(`renderState.passthroughFullyObscured = ${r.passthroughFullyObscured}`),e(`WebXR AR module = session.environmentBlendMode = ${t.environmentBlendMode}`),e(`WebXR AR module = session.environmentBlendMode = ${t.interactionMode}`),e(`WebXR Depth Sensing Module = session.depthUsage = ${t.depthUsage}`),e(`WebXR Depth Sensing Module = session.depthDataFormat = ${t.depthDataFormat}`),e(`WebXR Depth Sensing Module = session.depthType = ${t.depthType}`),e(`WebXR Depth Sensing Module = session.depthActive = ${t.depthActive}`)}async function p(){try{return await a.xr.requestSession("immersive-ar",{requiredFeatures:[s.REFERENCE_SPACE_TYPE,s.HAND_TRACKING,s.BODY_TRACKING],optionalFeatures:["secondary-views"]})}catch(t){throw e(`requestSession error = ${t.toString()}`),new Error(t.toString())}}async function u(){let t=i.querySelector(".enter > button");t.textContent=t.classList.toString(),t.addEventListener("click",async r=>{if(!r.isTrusted)return;let n=await p();c(n)})}async function l(){i.featurePolicy.allowsFeature("xr-spatial-tracking")?e("xr-spatial-tracking is supported"):e("xr-spatial-tracking is not supported"),a.xr.addEventListener("devicechange",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),e("\u6A5F\u80FD\u78BA\u8A8D"),await d(),await u()}l();})();
