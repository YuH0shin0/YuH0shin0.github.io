"use strict";(()=>{var a=window.document;var c=window.navigator;var l=class{constructor(t,n,d){return new window.XRWebGLLayer(t,n,d)}};function i(e){let t=a.getElementsByClassName("console-dom").item(0);t.textContent+=`${e}.    `}async function S(){await c.xr.isSessionSupported("immersive-ar")?i("immersive-ar is supported"):i("immersive-ar is not supported")}async function p(e,t){try{return t.includes("depth-sensing")?await c.xr.requestSession("immersive-ar",{requiredFeatures:[...e,...t],optionalFeatures:["secondary-views","layers"],depthSensing:{usagePreference:["cpu-optimized","gpu-optimized"],dataFormatPreference:["luminance-alpha","float32"]}}):await c.xr.requestSession("immersive-ar",{requiredFeatures:[...e,...t],optionalFeatures:["secondary-views","layers"]})}catch(n){throw i(`requestSession error = ${n.toString()}`),new Error(n.toString())}}async function y(e){let n=a.createElement("canvas").getContext("webgl2",{xrCompatible:!0});n.viewport(0,0,n.canvas.width,n.canvas.height),n.clearColor(255,255,255,1),n.clear(n.COLOR_BUFFER_BIT);let d=new l(e,n),u={depthNear:.1,depthFar:1e3,inlineVerticalFieldOfView:Math.PI*.5,passthroughFullyObscured:!0,baseLayer:d};e.updateRenderState(u),i(`passthroughFullyObscured = ${e.renderState.passthroughFullyObscured}`),i(`baseLayer = ${e.renderState.baseLayer}`),setTimeout(()=>{let s={depthNear:.1,depthFar:1e3,inlineVerticalFieldOfView:Math.PI*.5,passthroughFullyObscured:!1,baseLayer:d};e.updateRenderState(s),i(`passthroughFullyObscured = ${e.renderState.passthroughFullyObscured}`),i(`baseLayer = ${e.renderState.baseLayer}`)},1e4)}function m(){let e=new Set,t=new Set;a.querySelectorAll(".label").forEach(s=>{s.addEventListener("click",r=>{r.isTrusted&&r.target.previousElementSibling.click()})}),a.addEventListener("dispatchReferenceType",async s=>{let r=await p(Array.from(e),Array.from(t));await y(r)}),a.addEventListener("dispatchModule",async s=>{let r=await p(Array.from(e),Array.from(t));await y(r)}),a.querySelectorAll(".referenceSpaceType").forEach(s=>{s.addEventListener("click",r=>{let o=r.target;o.checked?e.add(o.value):e.delete(o.value),a.dispatchEvent(new CustomEvent("dispatchReferenceType",{detail:e}))})}),a.querySelectorAll(".module").forEach(s=>{s.addEventListener("click",r=>{let o=r.target;o.checked?t.add(o.value):t.delete(o.value),a.dispatchEvent(new CustomEvent("dispatchModule",{detail:t}))})})}async function g(){a.featurePolicy.allowsFeature("xr-spatial-tracking")?i("xr-spatial-tracking is supported"):i("xr-spatial-tracking is not supported"),i("\u6A5F\u80FD\u78BA\u8A8D"),m(),await S()}g();})();
