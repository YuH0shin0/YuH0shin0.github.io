"use strict";(()=>{var o=window.document;var d=window.navigator;function e(s){let p=o.getElementsByClassName("console-dom").item(0);p.textContent+=`${s}\r
`}var u="unbounded";async function y(){try{return await d.xr.requestSession("immersive-ar",{requiredFeatures:[u,"depth-sensing","body-tracking"],optionalFeatures:[],depthSensing:{usagePreference:["cpu-optimized","gpu-optimized"],dataFormatPreference:["luminance-alpha","float32"]}})}catch(s){throw e(`${JSON.stringify(s)}`),new Error}}async function g(){await d.xr.isSessionSupported("immersive-ar")?e("immersive-ar is supported"):e("immersive-ar is not supported")}async function m(){await g();let s=o.querySelector(".enter > button");s.textContent=s.classList.toString(),s.addEventListener("click",async p=>{if(!p.isTrusted)return;let n=await y(),l=await n.requestReferenceSpace(u);n.requestAnimationFrame((t,i)=>{e(`frameCallback of requestAnimationFrame(${t}, ${i})`),e(`session = ${i.session}`),e(`predictedDisplayTime = ${i.predictedDisplayTime}`),e(`bodyTracking = ${i.body}`);let r=i.getViewerPose(l);if(r){e(`emulatedPosition = ${r.emulatedPosition}`),e(`angularVelocity = ${r.angularVelocity}`),e(`linearVelocity = ${r.linearVelocity}`);for(let c of r.views)e(`view.eye = ${c.eye}`),e(`view.recommendedViewportScale = ${c.recommendedViewportScale}`),e(`view.requestViewportScale = ${c.requestViewportScale}`);e(`views = ${r?.views}`)}else e(`xrViewerPose = ${JSON.stringify(r)}`)}),e(`WebXR Depth Sensing Module = session.depthUsage = ${n.depthUsage}`),e(`WebXR Depth Sensing Module = session.depthDataFormat = ${n.depthDataFormat}`),e(`WebXR Depth Sensing Module = session.depthType = ${n.depthType}`),e(`WebXR Depth Sensing Module = session.depthActive = ${n.depthActive}`),e(`WebXR Depth Sensing module = session.resumeDepthSensing() = ${n.resumeDepthSensing()}`),n.addEventListener("onend",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),n.addEventListener("onframeratechange",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),n.addEventListener("oninputsourceschange",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),n.addEventListener("onselect",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),n.addEventListener("onselectend",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),n.addEventListener("onselectstart",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),n.addEventListener("onsqueeze",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),n.addEventListener("onsqueezeend",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),n.addEventListener("onvisibilitychange",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),e(`session.enabledFeatures = ${n.enabledFeatures}`),e(`session.supportedFrameRates = ${n.supportedFrameRates}`),e(`session.frameRate = ${n.frameRate}`),e(`session.inputSources = ${JSON.stringify(n.inputSources)}`),n.inputSources.forEach(t=>{e(`inputSource.gripSpace = ${t.gripSpace}`);let i=t.gripSpace;e(`${i?.toString()}`),e(`inputSource.handedness = ${t.handedness}`),e(`inputSource.profiles = ${t.profiles}`),e(`inputSource.skipRendering = ${t.skipRendering}`),e(`inputSource.targetRayMode = ${t.targetRayMode}`),e(`inputSource.targetRaySpace = ${t.targetRaySpace}`),e(`${t?.targetRaySpace.toString()}`),t.hand&&(e(`hand = ${t.hand.size}`),e(`wrist = ${t.hand.get("wrist").jointName}`))}),e(`session.isSystemKeyboardSupported = ${n.isSystemKeyboardSupported}`),e(`session.renderState = ${JSON.stringify(n.renderState)}`),e(`session.visibilityState = ${n.visibilityState}`);let a=n.renderState;e(`renderState.baseLayer = ${a.baseLayer}`),e(`renderState.depthFar = ${a.depthFar}`),e(`renderState.depthNear = ${a.depthNear}`),e(`renderState.inlineVerticalFieldOfView = ${a.inlineVerticalFieldOfView}`),e(`renderState.passthroughFullyObscured = ${a.passthroughFullyObscured}`),e(`WebXR AR module = session.environmentBlendMode = ${n.environmentBlendMode}`),e(`WebXR AR module = session.environmentBlendMode = ${n.interactionMode}`)})}async function $(){o.featurePolicy.allowsFeature("xr-spatial-tracking")?e("xr-spatial-tracking is supported"):e("xr-spatial-tracking is not supported"),d.xr.addEventListener("ondevicechange",s=>{s.isTrusted&&e(`event = ${s.type}(${s.target})`)}),e("\u6A5F\u80FD\u78BA\u8A8D"),await m()}$();})();
