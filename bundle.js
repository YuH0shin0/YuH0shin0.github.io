"use strict";(()=>{var a=window.document;var d=window.navigator;var c=class{constructor(t,s,u){return new window.XRWebGLLayer(t,s,u)}};function n(e){let t=a.getElementsByClassName("console-dom").item(0);t.textContent+=`${e}.    `}async function v(){await d.xr.isSessionSupported("immersive-ar")?n("immersive-ar is supported"):n("immersive-ar is not supported")}var m=null;function S(e,t){}async function p(e,t){try{return t.includes("depth-sensing")?await d.xr.requestSession("immersive-ar",{requiredFeatures:[...e,...t],optionalFeatures:[],depthSensing:{usagePreference:["cpu-optimized","gpu-optimized"],dataFormatPreference:["luminance-alpha","float32"]}}):await d.xr.requestSession("immersive-ar",{requiredFeatures:[...e,...t],optionalFeatures:[]})}catch(s){throw n(`requestSession error = ${s.toString()}`),new Error(s.toString())}}var f=a.createElement("canvas"),h=f.getContext("webgl2",{xrCompatible:!0});async function l(e){let t={depthNear:.1,depthFar:1e3,passthroughFullyObscured:!1,baseLayer:new c(e,h)};try{e.updateRenderState(t),m=await e.requestReferenceSpace("unbounded"),n(`passthroughFullyObscured = ${e.renderState.passthroughFullyObscured}`),n(`baseLayer = ${e.renderState.baseLayer}`)}catch(s){n(`updateRenderState > err = ${s.toString()}`)}e.requestAnimationFrame(S)}function y(){let e=new Set,t=new Set;a.querySelectorAll(".label").forEach(o=>{o.addEventListener("click",r=>{r.isTrusted&&r.target.previousElementSibling.click()})}),a.addEventListener("dispatchReferenceType",async o=>{let r=await p(Array.from(e),Array.from(t));await l(r)}),a.addEventListener("dispatchModule",async o=>{let r=await p(Array.from(e),Array.from(t));await l(r)}),a.querySelectorAll(".referenceSpaceType").forEach(o=>{o.addEventListener("click",r=>{let i=r.target;i.checked?e.add(i.value):e.delete(i.value),a.dispatchEvent(new CustomEvent("dispatchReferenceType",{detail:e}))})}),a.querySelectorAll(".module").forEach(o=>{o.addEventListener("click",r=>{let i=r.target;i.checked?t.add(i.value):t.delete(i.value),a.dispatchEvent(new CustomEvent("dispatchModule",{detail:t}))})})}async function E(){a.featurePolicy.allowsFeature("xr-spatial-tracking")?n("xr-spatial-tracking is supported"):n("xr-spatial-tracking is not supported"),n("\u6A5F\u80FD\u78BA\u8A8D"),y(),await v()}E();})();
