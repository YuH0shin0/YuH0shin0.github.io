"use strict";(()=>{var l=window.document;var u=window.navigator;var m=class{constructor(t,r,o){return new window.XRWebGLLayer(t,r,o)}};function a(e){let t=document.getElementsByClassName("console-dom").item(0);t.textContent+=`${e}.    `}async function c(e){await u.xr.isSessionSupported(e)?a(`${e} is supported`):a(`${e} is not supported`)}var f=new Set,g=new Set,S=new Set;function d(e,t,r){r.addEventListener("click",o=>{let n=o.target;n.checked?t.add(n.value):t.delete(n.value),document.dispatchEvent(new CustomEvent(e,{detail:[Array.from(f),Array.from(g),Array.from(S)]}))})}function R(e){e.addEventListener("click",t=>{t.isTrusted&&t.target.previousElementSibling.click()})}function v(e){document.querySelectorAll(".label").forEach(s=>{R(s)}),document.querySelectorAll(".required-features").forEach(s=>{d(e,f,s)}),document.querySelectorAll(".optional-features").forEach(s=>{d(e,g,s)}),document.querySelectorAll(".module").forEach(s=>{d(e,S,s)})}function E(e){return l.featurePolicy.allowsFeature(e,window.origin)}async function F(e,t,r,o){let n={requiredFeatures:[...t],optionalFeatures:[...r,...o]};o.includes("depth-sensing")&&(n.depthSensing={usagePreference:["cpu-optimized","gpu-optimized"],dataFormatPreference:["luminance-alpha","float32"]}),Object.freeze(n);try{return await u.xr.requestSession(e,n)}catch(s){throw a(`requestSession error = ${s.toString()}`),new Error(s.toString())}}var w=l.createElement("canvas"),i=w.getContext("webgl2",{xrCompatible:!0});i.viewport(0,0,i.canvas.width,i.canvas.height);i.clearColor(0,0,0,0);i.clear(i.COLOR_BUFFER_BIT);var p=new Map;p.set("inline",null);p.set("immersive-ar",null);p.set("immersive-vr",null);function L(e,t){let r=t.session;r.requestAnimationFrame(L),i.bindFramebuffer(i.FRAMEBUFFER,r.renderState.baseLayer.framebuffer)}function y(e){e.updateRenderState({baseLayer:new m(e,i)}),e.requestAnimationFrame(L)}async function h(){E("xr-spatial-tracking")?a("xr-spatial-tracking is supported"):a("xr-spatial-tracking is not supported"),await c("immersive-ar"),await c("immersive-vr"),u.xr.addEventListener("devicechange",()=>{a("devicechange")}),l.addEventListener("dispatchRequestSession",async e=>{a(`${e.type} > ${e.target} > ${e.timeStamp}`);let[t,r,o]=e.detail,n=await F("immersive-ar",t,r,o);y(n)}),v("dispatchRequestSession")}h();})();
