"use strict";(()=>{var t=window.document;var o=window.navigator;function r(e){let n=t.getElementsByClassName("console-dom").item(0);n.textContent+=`${e}.    `}async function u(){await o.xr.isSessionSupported("immersive-ar")?r("immersive-ar is supported"):r("immersive-ar is not supported")}async function c(e,n){try{return n.includes("depth-sensing")?await o.xr.requestSession("immersive-ar",{requiredFeatures:[...e,...n],optionalFeatures:["secondary-views","layers"],depthSensing:{usagePreference:["cpu-optimized","gpu-optimized"],dataFormatPreference:["luminance-alpha","float32"]}}):await o.xr.requestSession("immersive-ar",{requiredFeatures:[...e,...n],optionalFeatures:["secondary-views","layers"]})}catch(d){throw r(`requestSession error = ${d.toString()}`),new Error(d.toString())}}async function l(e){}function p(){let e=new Set,n=new Set;t.querySelectorAll(".label").forEach(s=>{s.addEventListener("click",a=>{a.isTrusted&&a.target.previousElementSibling.click()})}),t.addEventListener("dispatchReferenceType",async s=>{let a=await c(Array.from(e),Array.from(n));await l(a)}),t.addEventListener("dispatchModule",async s=>{let a=await c(Array.from(e),Array.from(n));await l(a)}),t.querySelectorAll(".referenceSpaceType").forEach(s=>{s.addEventListener("click",a=>{let i=a.target;i.checked?e.add(i.value):e.delete(i.value),t.dispatchEvent(new CustomEvent("dispatchReferenceType",{detail:e}))})}),t.querySelectorAll(".module").forEach(s=>{s.addEventListener("click",a=>{let i=a.target;i.checked?n.add(i.value):n.delete(i.value),t.dispatchEvent(new CustomEvent("dispatchModule",{detail:n}))})})}async function v(){t.featurePolicy.allowsFeature("xr-spatial-tracking")?r("xr-spatial-tracking is supported"):r("xr-spatial-tracking is not supported"),t.addEventListener("devicechange",e=>{r(`document > devicechange = ${e.target}`)}),window.addEventListener("devicechange",e=>{r(`window > devicechange = ${e.target}`)}),window.navigator.xr.addEventListener("devicechange",e=>{r(`window.navigator.xr > devicechange = ${e.target}`)}),r("\u6A5F\u80FD\u78BA\u8A8D"),p(),await u()}v();})();
