"use strict";(()=>{var a=window.document;var d=window.navigator;var c=class{constructor(t,s,u){return new window.XRWebGLLayer(t,s,u)}};function n(e){let t=a.getElementsByClassName("console-dom").item(0);t.textContent+=`${e}.    `}async function S(){await d.xr.isSessionSupported("immersive-ar")?n("immersive-ar is supported"):n("immersive-ar is not supported")}async function l(e,t){try{return t.includes("depth-sensing")?await d.xr.requestSession("immersive-ar",{requiredFeatures:[...e,...t],optionalFeatures:[],depthSensing:{usagePreference:["cpu-optimized","gpu-optimized"],dataFormatPreference:["luminance-alpha","float32"]}}):await d.xr.requestSession("immersive-ar",{requiredFeatures:[...e,...t],optionalFeatures:[]})}catch(s){throw n(`requestSession error = ${s.toString()}`),new Error(s.toString())}}async function v(e){let s=a.createElement("canvas").getContext("webgl2",{xrCompatible:!0}),u={depthNear:.1,depthFar:1e3,passthroughFullyObscured:!1,baseLayer:new c(e,s)};try{e.updateRenderState(u),n(`passthroughFullyObscured = ${e.renderState.passthroughFullyObscured}`),n(`baseLayer = ${e.renderState.baseLayer}`)}catch(p){n(`updateRenderState > err = ${p.toString()}`)}}function m(){let e=new Set,t=new Set;a.querySelectorAll(".label").forEach(o=>{o.addEventListener("click",r=>{r.isTrusted&&r.target.previousElementSibling.click()})}),a.addEventListener("dispatchReferenceType",async o=>{let r=await l(Array.from(e),Array.from(t));await v(r)}),a.addEventListener("dispatchModule",async o=>{let r=await l(Array.from(e),Array.from(t));await v(r)}),a.querySelectorAll(".referenceSpaceType").forEach(o=>{o.addEventListener("click",r=>{let i=r.target;i.checked?e.add(i.value):e.delete(i.value),a.dispatchEvent(new CustomEvent("dispatchReferenceType",{detail:e}))})}),a.querySelectorAll(".module").forEach(o=>{o.addEventListener("click",r=>{let i=r.target;i.checked?t.add(i.value):t.delete(i.value),a.dispatchEvent(new CustomEvent("dispatchModule",{detail:t}))})})}async function y(){a.featurePolicy.allowsFeature("xr-spatial-tracking")?n("xr-spatial-tracking is supported"):n("xr-spatial-tracking is not supported"),n("\u6A5F\u80FD\u78BA\u8A8D"),m(),await S()}y();})();
