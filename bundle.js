"use strict";(()=>{var o=window.document;var u=window.navigator;function e(a){let d=o.getElementsByClassName("console-dom").item(0);d.textContent+=`${a}\r
`}function c(a,d){e(`frameCallback of requestAnimationFrame(${a}, ${d})`),e(`session = ${d.session}`),e(`predictedDisplayTime = ${d.predictedDisplayTime}`)}async function l(){let a=await u.xr.isSessionSupported("immersive-ar");e(`navigator.xr.isSessionSupported('immersive-ar') = ${a}`),o.querySelectorAll(".enter > button").forEach(r=>{let i=r.classList.toString();r.textContent=i,r.addEventListener("click",async n=>{if(!n.isTrusted)return;let t=await u.xr.requestSession("immersive-ar",{requiredFeatures:[i],optionalFeatures:[]}),v=await t.requestReferenceSpace(i);v.addEventListener("onreset",s=>{s.isTrusted&&e(`referenceSpace = ${s.type}(${s.target})`)}),e(`boundReferenceSpace.boundsGeometry = ${v.boundsGeometry}`),t.requestAnimationFrame(c),t.addEventListener("onend",s=>{s.isTrusted&&e(`event = ${s.type}(${s.target})`)}),t.addEventListener("onframeratechange",s=>{s.isTrusted&&e(`event = ${s.type}(${s.target})`)}),t.addEventListener("oninputsourceschange",s=>{s.isTrusted&&e(`event = ${s.type}(${s.target})`)}),t.addEventListener("onselect",s=>{s.isTrusted&&e(`event = ${s.type}(${s.target})`)}),t.addEventListener("onselectend",s=>{s.isTrusted&&e(`event = ${s.type}(${s.target})`)}),t.addEventListener("onselectstart",s=>{s.isTrusted&&e(`event = ${s.type}(${s.target})`)}),t.addEventListener("onsqueeze",s=>{s.isTrusted&&e(`event = ${s.type}(${s.target})`)}),t.addEventListener("onsqueezeend",s=>{s.isTrusted&&e(`event = ${s.type}(${s.target})`)}),t.addEventListener("onvisibilitychange",s=>{s.isTrusted&&e(`event = ${s.type}(${s.target})`)}),e(`session.enabledFeatures = ${t.enabledFeatures}`),e(`session.supportedFrameRates = ${t.supportedFrameRates}`),e(`session.frameRate = ${t.frameRate}`),e(`session.inputSources = ${JSON.stringify(t.inputSources)}`),e(`session.isSystemKeyboardSupported = ${t.isSystemKeyboardSupported}`),e(`session.renderState = ${JSON.stringify(t.renderState)}`),e(`session.visibilityState = ${t.visibilityState}`);let p=t.renderState;e(`renderState.baseLayer = ${p.baseLayer}`),e(`renderState.depthFar = ${p.depthFar}`),e(`renderState.depthNear = ${p.depthNear}`),e(`renderState.inlineVerticalFieldOfView = ${p.inlineVerticalFieldOfView}`),e(`renderState.passthroughFullyObscured = ${p.passthroughFullyObscured}`),e(`WebXR AR module = session.environmentBlendMode = ${t.environmentBlendMode}`),e(`WebXR AR module = session.environmentBlendMode = ${t.interactionMode}`)})})}async function $(){let a=o.querySelector(".ar-module > button");a.textContent=a.classList.toString(),a.addEventListener("click",async d=>{let r=a.classList.toString();if(!d.isTrusted)return;let i=await u.xr.requestSession("immersive-ar",{requiredFeatures:["unbounded"],optionalFeatures:[r]});i.requestAnimationFrame(c),i.addEventListener("onend",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),i.addEventListener("onframeratechange",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),i.addEventListener("oninputsourceschange",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),i.addEventListener("onselect",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),i.addEventListener("onselectend",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),i.addEventListener("onselectstart",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),i.addEventListener("onsqueeze",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),i.addEventListener("onsqueezeend",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),i.addEventListener("onvisibilitychange",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),e(`session.enabledFeatures = ${i.enabledFeatures}`),e(`session.supportedFrameRates = ${i.supportedFrameRates}`),e(`session.frameRate = ${i.frameRate}`),e(`session.inputSources = ${JSON.stringify(i.inputSources)}`),e(`session.isSystemKeyboardSupported = ${i.isSystemKeyboardSupported}`),e(`session.renderState = ${JSON.stringify(i.renderState)}`),e(`session.visibilityState = ${i.visibilityState}`);let n=i.renderState;e(`renderState.baseLayer = ${n.baseLayer}`),e(`renderState.depthFar = ${n.depthFar}`),e(`renderState.depthNear = ${n.depthNear}`),e(`renderState.inlineVerticalFieldOfView = ${n.inlineVerticalFieldOfView}`),e(`renderState.passthroughFullyObscured = ${n.passthroughFullyObscured}`),e(`WebXR AR module = session.environmentBlendMode = ${i.environmentBlendMode}`),e(`WebXR AR module = session.environmentBlendMode = ${i.interactionMode}`)})}function y(){let a=o.querySelector(".depth-sensing-module > button");a.textContent=a.classList.toString(),a.addEventListener("click",async d=>{if(!d.isTrusted)return Promise.reject(!1);let r=await u.xr.requestSession("immersive-ar",{requiredFeatures:["depth-sensing","unbounded"],depthSensing:{usagePreference:["cpu-optimized","gpu-optimized"],dataFormatPreference:["luminance-alpha","float32"]}});r.requestAnimationFrame(c),e(`WebXR Depth Sensing Module = session.depthUsage = ${r.depthUsage}`),e(`WebXR Depth Sensing Module = session.depthDataFormat = ${r.depthDataFormat}`),e(`WebXR Depth Sensing Module = session.depthType = ${r.depthType}`),e(`WebXR Depth Sensing Module = session.depthActive = ${r.depthActive}`),r.addEventListener("onend",n=>{n.isTrusted&&e(`event = ${n.type}(${n.target})`)}),r.addEventListener("onframeratechange",n=>{n.isTrusted&&e(`event = ${n.type}(${n.target})`)}),r.addEventListener("oninputsourceschange",n=>{n.isTrusted&&e(`event = ${n.type}(${n.target})`)}),r.addEventListener("onselect",n=>{n.isTrusted&&e(`event = ${n.type}(${n.target})`)}),r.addEventListener("onselectend",n=>{n.isTrusted&&e(`event = ${n.type}(${n.target})`)}),r.addEventListener("onselectstart",n=>{n.isTrusted&&e(`event = ${n.type}(${n.target})`)}),r.addEventListener("onsqueeze",n=>{n.isTrusted&&e(`event = ${n.type}(${n.target})`)}),r.addEventListener("onsqueezeend",n=>{n.isTrusted&&e(`event = ${n.type}(${n.target})`)}),r.addEventListener("onvisibilitychange",n=>{n.isTrusted&&e(`event = ${n.type}(${n.target})`)}),e(`session.enabledFeatures = ${r.enabledFeatures}`),e(`session.supportedFrameRates = ${r.supportedFrameRates}`),e(`session.frameRate = ${r.frameRate}`),e(`session.inputSources = ${JSON.stringify(r.inputSources)}`),e(`session.isSystemKeyboardSupported = ${r.isSystemKeyboardSupported}`),e(`session.renderState = ${JSON.stringify(r.renderState)}`),e(`session.visibilityState = ${r.visibilityState}`);let i=r.renderState;e(`renderState.baseLayer = ${i.baseLayer}`),e(`renderState.depthFar = ${i.depthFar}`),e(`renderState.depthNear = ${i.depthNear}`),e(`renderState.inlineVerticalFieldOfView = ${i.inlineVerticalFieldOfView}`),e(`renderState.passthroughFullyObscured = ${i.passthroughFullyObscured}`),e(`WebXR AR module = session.environmentBlendMode = ${r.environmentBlendMode}`),e(`WebXR AR module = session.environmentBlendMode = ${r.interactionMode}`),e(`WebXR Depth Sensing module = session.resumeDepthSensing() = ${r.resumeDepthSensing()}`)})}async function m(){o.featurePolicy.allowsFeature("xr-spatial-tracking")?e("xr-spatial-tracking is supported"):e("xr-spatial-tracking is not supported"),u.xr.addEventListener("ondevicechange",a=>{a.isTrusted&&e(`event = ${a.type}(${a.target})`)}),e("\u6A5F\u80FD\u78BA\u8A8D"),await l(),await $(),await y()}m();})();
