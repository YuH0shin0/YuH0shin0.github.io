"use strict";(()=>{var r=window.document;var i=window.navigator;function e(t){let a=r.getElementsByClassName("console-dom").item(0);a.textContent+=`${t}\r
`}var s={REFERENCE_SPACE_TYPE:"unbounded",DEPTH_SENSING:"depth-sensing"};async function d(){await i.xr.isSessionSupported("immersive-ar")?e("immersive-ar is supported"):e("immersive-ar is not supported")}function p(t){e(`session.enabledFeatures = ${t.enabledFeatures}`),e(`session.supportedFrameRates = ${t.supportedFrameRates}`),e(`session.frameRate = ${t.frameRate}`),e(`session.inputSources = ${JSON.stringify(t.inputSources)}`),t.inputSources.forEach(n=>{e(`inputSource.gripSpace = ${n.gripSpace}`);let o=n.gripSpace;e(`${o?.toString()}`),e(`inputSource.handedness = ${n.handedness}`),e(`inputSource.profiles = ${n.profiles}`),e(`inputSource.skipRendering = ${n.skipRendering}`),e(`inputSource.targetRayMode = ${n.targetRayMode}`),e(`inputSource.targetRaySpace = ${n.targetRaySpace}`),e(`${n?.targetRaySpace.toString()}`),n.hand&&(e(`hand = ${n.hand.size}`),e(`wrist = ${n.hand.get("wrist").jointName}`))}),e(`session.isSystemKeyboardSupported = ${t.isSystemKeyboardSupported}`),e(`session.renderState = ${JSON.stringify(t.renderState)}`),e(`session.visibilityState = ${t.visibilityState}`);let a=t.renderState;e(`renderState.baseLayer = ${a.baseLayer}`),e(`renderState.depthFar = ${a.depthFar}`),e(`renderState.depthNear = ${a.depthNear}`),e(`renderState.inlineVerticalFieldOfView = ${a.inlineVerticalFieldOfView}`),e(`renderState.passthroughFullyObscured = ${a.passthroughFullyObscured}`),e(`WebXR AR module = session.environmentBlendMode = ${t.environmentBlendMode}`),e(`WebXR AR module = session.environmentBlendMode = ${t.interactionMode}`),e(`WebXR Depth Sensing Module = session.depthUsage = ${t.depthUsage}`),e(`WebXR Depth Sensing Module = session.depthDataFormat = ${t.depthDataFormat}`),e(`WebXR Depth Sensing Module = session.depthType = ${t.depthType}`),e(`WebXR Depth Sensing Module = session.depthActive = ${t.depthActive}`)}async function c(){let t=r.querySelector(".enter > button");t.textContent=t.classList.toString(),t.addEventListener("click",async a=>{if(!a.isTrusted)return;let n=await i.xr.requestSession("immersive-ar",{requiredFeatures:[s.REFERENCE_SPACE_TYPE,s.DEPTH_SENSING],optionalFeatures:[],depthSensing:{usagePreference:["cpu-optimized","gpu-optimized"],dataFormatPreference:["luminance-alpha","float32"]}});p(n)})}async function u(){r.featurePolicy.allowsFeature("xr-spatial-tracking")?e("xr-spatial-tracking is supported"):e("xr-spatial-tracking is not supported"),i.xr.addEventListener("devicechange",t=>{t.isTrusted&&e(`event = ${t.type}(${t.target})`)}),e("\u6A5F\u80FD\u78BA\u8A8D"),await d(),await c()}u();})();
